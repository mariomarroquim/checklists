<% content_for :title, "My checklists" %>

<div id="checklists">
  <% @checklists.each do |checklist| %>
    <details name="checklists" id="checklist-<%= checklist.id %>">
      <summary><%= checklist.title %></summary>

      <% if checklist.items.present? %>
        <ul>
          <% checklist.items.each do |item| %>
            <li><%= auto_link(item) { "here" } %></li>
          <% end %>
        </ul>
      <% else %>
        <p>No items found in this checklist.</p>
      <% end %>

      <p>
        <%= render partial: "actions", locals: { checklist: checklist } %>
      </p>

      <% if checklist.published_at.present? %>
        <p>
          <small>
            Publishable URL:
            <%= link_to truncate(public_checklist_path(slug: checklist.slug)), public_checklist_url(slug: checklist.slug) %>
          </small>
        </p>
      <% end %>
    </details>
  <% end %>

  <p style="margin-top: 1.7em;">
    <%= link_to "Add checklist", new_checklist_path %>
  </p>
</div>
